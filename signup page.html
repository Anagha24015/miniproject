<!DOCTYPE html>
<html>
<head>
    <title>Sign up</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background-image: url('https://png.pngtree.com/png-vector/20220610/ourmid/pngtree-world-map-silhouette-vector-australia-png-image_4955918.png');
        background-repeat: no-repeat;
        
        background-size: 100% auto;
    
    }

    /* Banner section only */
    .top-banner {
        height: 200px;
        background-image: url('https://poonawallafincorp.com/documents/213163/213167/blog_banner-banner-image-checklist-of-things-to-carry-while-travelling-for-a-seamless-experience.jpg');
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100% auto;
        display: flex;
        margin-top: 0px;
        flex-direction: column;
        justify-content: center;
        color: rgb(250, 246, 246);
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .logo {
        font-size: 90px;
        font-style: italic;
        margin-left: 40px;
        margin-top:7px;
    }

    .nav {
        display:flex;
        gap: 20px;
        font-weight: bold;
        font-size: 20px;
        margin-top: 30px;
        margin-left: auto;
        margin-right: 100px;
    }

    .nav :hover {
        cursor: pointer;
    }

    .one {
        display: block;
        
        margin-top: 90px;
        margin-left: 50px;
        font-size: 20px;
        margin-right:0px;
        
    }

    .field {
        margin-top: 50px;
        width: 600px;
    
        background-size: cover;
        background-position: center;
        backdrop-filter: blur(0px);
        border: dotted;
        border-radius: 50px;
        margin-left: 430px;
    }

    .submit {
        margin-top: 0px;
        margin-left: 200px;
        border-radius: 30px;
        width: 100px;
        height: 40px;
        margin-bottom: 60px;
        background-color: rgb(56, 84, 133);
        border: none;
        font-size: 18px;
        color: aliceblue;
        font-weight: bold;
    }

    .submit:hover {
        background-color: rgb(152, 152, 230);
        color: rgb(56, 84, 133);
        cursor: pointer;
    }

    input {
        width: 200px;
        height: 30px;
        border-radius: 30px;
        background-color: #c7c1c1;
        border: none;
        font-weight: bold;
    }

    /*.gender{
    display: flex;
    
    gap: 0px; 
    font-size: 20px;
    margin-left: 50px;
}

.options {
    display: flex;
    gap: 0px; 
    margin-left: -60px;
}*/

/*.radio-option {
    display: flex;
    gap: 0px; 
    font-size: 20px;
    margin-left: -80px;
}
.radio-option input[type="radio"] {
    margin-left: -40px;
    padding: 0px;
}*/

    .form-group {
        margin-bottom: 20px;
        position: relative;
        align-items: center;
    }
    .error {
        color: red;
        font-size: 14px;
        display: block;
        margin-top: 4px;
    }

    .new {
        margin-left: 230px;
        margin-bottom: 30px;
    }

    footer {
            text-align: center;
            padding: 20px;
            background-color: #f1f1f1;
            margin-top: 40px;
            font-size: 14px;
            color: #777;
        }

    .form-group.gender-row {
        display: flex;
        align-items: center;
        gap: 16px;
    }
    .gender-label {
        min-width: 80px;
        font-size: 20px;
    }
    .gender-options {
        display: flex;
        flex-direction: row;
        gap: 24px;
        align-items: center;
    }
    .gender-options label {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 20px;
        margin: 0;
        min-width: 80px;
    }
    .gender-options input[type="radio"] {
        margin: 0;
        width: auto;
        transform: scale(1.3);
    }

    </style>
</head>
<body>
    <div class="top-banner">
        <div class="logo">BONVOYAGE</div>
        <div class="nav">
            <span onclick="goHome()">Home</span>
            <span onclick="faq()">FAQ</span>
            <span onclick="blogs()">Blogs</span>
            <span onclick="contact()">Contact</span>
        </div>
    </div>

    <!-- Add Firebase JS SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script>
      // TODO: Replace with your Firebase project config
      const firebaseConfig = {
            apiKey: "AIzaSyBVwjZ7HbypfVy_HI-e30EmN9xBXbRREdo",
            authDomain: "ai-travel-packing-assistant.firebaseapp.com",
            projectId: "ai-travel-packing-assistant",
            storageBucket: "ai-travel-packing-assistant.appspot.com",
            messagingSenderId: "1096528973272",
            appId: "1:1096528973272:web:cefe3f2cc51e096ffb76ad"
      };
      firebase.initializeApp(firebaseConfig);
    </script>

    <form action="#" method="post" id="signup" onsubmit="return validate(event)">
        <fieldset class="field">
         <div class="one">
          <div class="form-group">
            <label for="username">Set a username:</label>
            <input type="text" id="username" name="username">
            <span class="error" id="usernameerror"></span>
          </div>
          <div class="form-group">
            <label for="p">Set a password:</label>
            <input type="password" id="p" name="p">
            <span class="error" id="perror"></span>
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirm Password:</label>
            <input type="password" id="confirmPassword">
            <span class="error" id="confirmPasswordError"></span>
          </div>
          <div class="form-group">
            <label for="e">Email:</label>
            <input type="text" id="e" name="e">
            <span class="error" id="eerror"></span>
          </div>
          <div class="form-group">
            <label for="mobile">Mobile Number:</label>
            <input type="text" id="mobile">
            <span class="error" id="mobileError"></span>
          </div>
          <div class="form-group gender-row">
            <label class="gender-label">Gender:</label>
            <div class="gender-options">
                <label><input type="radio" name="gender" id="genderMale" value="Male"> Male</label>
                <label><input type="radio" name="gender" id="genderFemale" value="Female"> Female</label>
            </div>
            <span class="error" id="genderError"></span>
          </div>
          <button type="submit" class="submit">Signup</button>
         </div>
        </fieldset>
    </form>
    
    <script>
        function validate(event) {
            event.preventDefault();
            let isValid = true;

            // Get all values
            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("p").value;
            const confirmPassword = document.getElementById("confirmPassword").value;
            const email = document.getElementById("e").value.trim();
            const mobile = document.getElementById("mobile").value.trim();
            const gender = document.querySelector('input[name="gender"]:checked')?.value;

            // Username validation
            if (!/^[A-Za-z0-9]{3,}$/.test(username)) {
                document.getElementById("usernameerror").innerText = "Username must be at least 3 characters";
                isValid = false;
            } else {
                document.getElementById("usernameerror").innerText = "";
            }

            // Password validation
            const passwordPattern = /^(?=.*[A-Z])(?=.*[a-z])(?=.*[\d])(?=.*[@#$%&*?!])[A-Za-z0-9@#$%&*?!]{8,}$/;
            if (!passwordPattern.test(password)) {
                document.getElementById("perror").innerText = "Password must be at least 8 characters with uppercase, lowercase, number & special character";
                isValid = false;
            } else {
                document.getElementById("perror").innerText = "";
            }

            // Confirm password
            if (confirmPassword !== password) {
                document.getElementById("confirmPasswordError").innerText = "Passwords do not match";
                isValid = false;
            } else {
                document.getElementById("confirmPasswordError").innerText = "";
            }

            // Email validation
            const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            if (!emailPattern.test(email)) {
                document.getElementById("eerror").innerText = "Please enter a valid email address";
                isValid = false;
            } else {
                document.getElementById("eerror").innerText = "";
            }

            // Mobile validation
            if (!/^[0-9]{10}$/.test(mobile)) {
                document.getElementById("mobileError").innerText = "Please enter a valid 10-digit mobile number";
                isValid = false;
            } else {
                document.getElementById("mobileError").innerText = "";
            }

            if (!gender) {
                alert("Please select a gender.");
                isValid = false;
            }

            if (isValid) {
                // Use Firebase Auth to create user
                firebase.auth().createUserWithEmailAndPassword(email, password)
                  .then((userCredential) => userCredential.user.getIdToken())
                  .then((idToken) => {
                    // Store token for later API use (e.g., in localStorage)
                    localStorage.setItem("firebaseIdToken", idToken);
                    // Optionally, store user profile info
                    localStorage.setItem("userProfile", JSON.stringify({ username, email, mobile, gender }));
                    // Send user profile to backend
                    return fetch('http://localhost:5000/api/profile', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + idToken
                      },
                      body: JSON.stringify({
                        name: username,
                        preferences: {
                          mobile: mobile,
                          gender: gender
                        }
                      })
                    });
                  })
                  .then(response => response.json())
                  .then(data => {
                    alert("Signup successful!");
                    window.location.href = "profile2.html";
                  })
                  .catch((error) => {
                    // Show Firebase or fetch error
                    alert("Signup failed: " + error.message);
                  });
            }
            return false;
        }


        function goHome() {
            window.location.href = 'myproject design 2.html';  
        }

        function faq(){
            window.location.href = 'FAQ2.html';
        }

        function blogs(){
            window.location.href = 'blogs2.html';
        }

        function contact(){
            window.location.href = 'Contact2.html';
        }
    </script>
    
    <footer>
        © 2025 Bonvoyage- Travel Packing Assistant. All rights reserved.
      </footer>
    </body>
    </html>
    